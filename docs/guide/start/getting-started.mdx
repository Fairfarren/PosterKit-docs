import { PackageManagerTabs } from '/theme/index';

# å¿«é€Ÿå¼€å§‹

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨å‡ åˆ†é’Ÿå†…å®Œæˆ PosterKit çš„å®‰è£…å’ŒåŸºç¡€é…ç½®ï¼Œå¿«é€Ÿä½“éªŒæµ·æŠ¥ç¼–è¾‘åŠŸèƒ½ã€‚

## ğŸ“¦ å®‰è£…

### æ ¸å¿ƒåŒ…å®‰è£…

<PackageManagerTabs command="install poster-kit" />

### æ¡†æ¶é€‚é…åŒ…ï¼ˆå¯é€‰ï¼‰

æ ¹æ®æ‚¨çš„é¡¹ç›®æ¡†æ¶é€‰æ‹©å¯¹åº”çš„é€‚é…åŒ…ï¼š

**React é¡¹ç›®**

<PackageManagerTabs command="install @stencil/react-output-target" />

**Vue é¡¹ç›®**

<PackageManagerTabs command="install @stencil/vue-output-target" />

## âš¡ å¿«é€Ÿä½“éªŒ

### åŸç”Ÿ HTML ä½¿ç”¨

æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼ï¼Œé€‚åˆå¿«é€ŸéªŒè¯åŠŸèƒ½ï¼š

```html title="index.html"
<!DOCTYPE html>
<html>
  <head>
    <title>PosterKit Demo</title>
    <script
      type="module"
      src="https://unpkg.com/poster-kit/dist/posterKit/posterKit.esm.js"
    ></script>
  </head>
  <body>
    <div style="width: 800px; height: 600px;">
      <kit-box width="1080" height="1920"></kit-box>
    </div>

    <script>
      const kitBox = document.querySelector('kit-box');

      // æ·»åŠ æ–‡æœ¬å¡ç‰‡
      kitBox.add({
        id: 'text-1',
        type: 'text',
        text: 'æ¬¢è¿ä½¿ç”¨ PosterKit!',
        x: 100,
        y: 100,
        width: 300,
        height: 100,
        fontSize: 32,
        fontFamily: 'Arial',
        color: '#333333',
        fontWeight: 'bold',
        fontStyle: 'normal',
        decoration: 'none',
      });

      // ç›‘å¬æ•°æ®å˜åŒ–
      kitBox.addEventListener('current-data-change', (e) => {
        console.log('å½“å‰é€‰ä¸­çš„å¡ç‰‡ï¼š', e.detail);
      });
    </script>
  </body>
</html>
```

## ğŸ”§ React é›†æˆ

### 1. é¡¹ç›®é…ç½®

React é¡¹ç›®éœ€è¦é¢å¤–çš„é…ç½®æ¥æ”¯æŒ Web Componentsï¼š

```tsx title="App.tsx"
import './App.css';
import type { CardData } from 'poster-kit';
import { KitBox } from 'poster-kit/dist/react/components.ts';
import { type ComponentRef, useRef, useState } from 'react';

const App = () => {
  const kitBoxRef = useRef<ComponentRef<typeof KitBox> | null>(null);
  const [currentData, setCurrentData] = useState<CardData | null>(null);

  // å¤„ç†æ•°æ®å˜åŒ–
  function handleDataChange(data: CardData) {
    console.log('æ•°æ®å˜åŒ–ï¼š', data);
    setCurrentData(data);
  }

  // æ·»åŠ æ–‡æœ¬å¡ç‰‡
  function addTextCard() {
    kitBoxRef.current?.add({
      id: Date.now().toString(),
      type: 'text',
      text: 'æ–°çš„æ–‡æœ¬å†…å®¹',
      x: Math.random() * 500,
      y: Math.random() * 500,
      width: 300,
      height: 100,
      fontSize: 24,
      fontFamily: 'Arial, sans-serif',
      color: '#333333',
      fontWeight: 'normal',
      fontStyle: 'normal',
      decoration: 'none',
    });
  }

  // æ·»åŠ å›¾ç‰‡å¡ç‰‡
  function addImageCard() {
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.src = 'https://via.placeholder.com/300x200/4285f4/ffffff?text=Sample';
    img.onload = () => {
      kitBoxRef.current?.add({
        id: Date.now().toString(),
        type: 'image',
        image: img,
        x: Math.random() * 400,
        y: Math.random() * 400,
        width: 300,
        height: 200,
      });
    };
  }

  // ç”Ÿæˆæµ·æŠ¥
  async function generatePoster() {
    try {
      const canvas = await kitBoxRef.current?.createPoster();
      if (canvas) {
        const url = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.download = 'poster.png';
        link.href = url;
        link.click();
      }
    } catch (error) {
      console.error('ç”Ÿæˆæµ·æŠ¥å¤±è´¥ï¼š', error);
    }
  }

  return (
    <div className="app">
      <div className="editor-container">
        <KitBox
          ref={kitBoxRef}
          width={1080}
          height={1920}
          onCurrentDataChange={(e) => handleDataChange(e.detail)}
        />
      </div>

      <div className="toolbar">
        <button onClick={addTextCard}>æ·»åŠ æ–‡æœ¬</button>
        <button onClick={addImageCard}>æ·»åŠ å›¾ç‰‡</button>
        <button onClick={generatePoster}>ç”Ÿæˆæµ·æŠ¥</button>
      </div>

      {currentData && (
        <div className="properties-panel">
          <h3>å±æ€§é¢æ¿</h3>
          <p>é€‰ä¸­å…ƒç´  ID: {currentData.id}</p>
          <p>ç±»å‹: {currentData.type}</p>
          <p>
            ä½ç½®: ({currentData.x}, {currentData.y})
          </p>
          <p>
            å°ºå¯¸: {currentData.width} Ã— {currentData.height}
          </p>
        </div>
      )}
    </div>
  );
};

export default App;
```

```css title="App.css"
.app {
  display: flex;
  height: 100vh;
  font-family:
    -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

.editor-container {
  flex: 1;
  padding: 20px;
  background: #f5f5f5;
}

.toolbar {
  width: 200px;
  padding: 20px;
  background: white;
  border-left: 1px solid #e0e0e0;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.toolbar button {
  padding: 10px 15px;
  border: 1px solid #ddd;
  border-radius: 4px;
  background: white;
  cursor: pointer;
  transition: background-color 0.2s;
}

.toolbar button:hover {
  background: #f5f5f5;
}

.properties-panel {
  width: 250px;
  padding: 20px;
  background: white;
  border-left: 1px solid #e0e0e0;
  overflow-y: auto;
}

.properties-panel h3 {
  margin-top: 0;
  color: #333;
}

.properties-panel p {
  margin: 8px 0;
  font-size: 14px;
  color: #666;
}
```

### 2. å®Œæ•´ç¤ºä¾‹

å‚è€ƒæˆ‘ä»¬çš„ [React å®Œæ•´ç¤ºä¾‹](https://github.com/Fairfarren/PosterKit/tree/main/example/react)ï¼ŒåŒ…å«äº†å›¾ç‰‡åˆ—è¡¨ã€å±æ€§ç¼–è¾‘é¢æ¿ç­‰å®Œæ•´åŠŸèƒ½ã€‚

## ğŸ”§ Vue é›†æˆ

### 1. æ„å»ºé…ç½®

Vue é¡¹ç›®éœ€è¦é…ç½®è‡ªå®šä¹‰å…ƒç´ è¯†åˆ«ï¼š

```ts title="vite.config.ts / rsbuild.config.ts"
import { defineConfig } from '@rsbuild/core';
import { pluginVue } from '@rsbuild/plugin-vue';

export default defineConfig({
  plugins: [
    pluginVue({
      vueLoaderOptions: {
        compilerOptions: {
          // å‘Šè¯‰ Vue å°† kit- å¼€å¤´çš„æ ‡ç­¾è§†ä¸ºè‡ªå®šä¹‰å…ƒç´ 
          isCustomElement: (tag) => tag.startsWith('kit-'),
        },
      },
    }),
  ],
});

// Vite é¡¹ç›®é…ç½®
// import { defineConfig } from 'vite'
// import vue from '@vitejs/plugin-vue'
//
// export default defineConfig({
//   plugins: [
//     vue({
//       template: {
//         compilerOptions: {
//           isCustomElement: (tag) => tag.startsWith('kit-'),
//         },
//       },
//     }),
//   ],
// })
```

### 2. ç»„ä»¶æ³¨å†Œ

```ts title="main.ts"
import { createApp } from 'vue';
import App from './App.vue';
import './index.css';

// å¼•å…¥å¹¶æ³¨å†Œ PosterKit ç»„ä»¶
import 'poster-kit/dist/vue/index.ts';

const app = createApp(App);
app.mount('#app');
```

### 3. ç»„ä»¶ä½¿ç”¨

```html title="App.vue"
<template>
  <div class="app">
    <div class="editor-container">
      <kit-box
        ref="kitBoxRef"
        :width="1080"
        :height="1920"
        @current-data-change="handleDataChange"
      />
    </div>

    <div class="toolbar">
      <button @click="addTextCard">æ·»åŠ æ–‡æœ¬</button>
      <button @click="addImageCard">æ·»åŠ å›¾ç‰‡</button>
      <button @click="generatePoster">ç”Ÿæˆæµ·æŠ¥</button>
    </div>

    <div v-if="currentData" class="properties-panel">
      <h3>å±æ€§é¢æ¿</h3>
      <div class="property-item">
        <label>ID:</label>
        <span>{{ currentData.id }}</span>
      </div>
      <div class="property-item">
        <label>ç±»å‹:</label>
        <span>{{ currentData.type }}</span>
      </div>
      <div class="property-item">
        <label>ä½ç½®:</label>
        <span>({{ currentData.x }}, {{ currentData.y }})</span>
      </div>
      <div class="property-item">
        <label>å°ºå¯¸:</label>
        <span>{{ currentData.width }} Ã— {{ currentData.height }}</span>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
  import type { CardData } from 'poster-kit';
  import { ref } from 'vue';

  const kitBoxRef = ref<HTMLKitBoxElement | null>(null);
  const currentData = ref<CardData | null>(null);

  // å¤„ç†æ•°æ®å˜åŒ–
  function handleDataChange(e: CustomEvent<CardData>) {
    console.log('æ•°æ®å˜åŒ–ï¼š', e.detail);
    currentData.value = e.detail;
  }

  // æ·»åŠ æ–‡æœ¬å¡ç‰‡
  function addTextCard() {
    kitBoxRef.value?.add({
      id: Date.now().toString(),
      type: 'text',
      text: 'æ–°çš„æ–‡æœ¬å†…å®¹',
      x: Math.random() * 500,
      y: Math.random() * 500,
      width: 300,
      height: 100,
      fontSize: 24,
      fontFamily: 'Arial, sans-serif',
      color: '#333333',
      fontWeight: 'normal',
      fontStyle: 'normal',
      decoration: 'none',
    });
  }

  // æ·»åŠ å›¾ç‰‡å¡ç‰‡
  function addImageCard() {
    const img = new Image();
    img.crossOrigin = 'anonymous';
    img.src = 'https://via.placeholder.com/300x200/34a853/ffffff?text=Sample';
    img.onload = () => {
      kitBoxRef.value?.add({
        id: Date.now().toString(),
        type: 'image',
        image: img,
        x: Math.random() * 400,
        y: Math.random() * 400,
        width: 300,
        height: 200,
      });
    };
  }

  // ç”Ÿæˆæµ·æŠ¥
  async function generatePoster() {
    try {
      const canvas = await kitBoxRef.value?.createPoster();
      if (canvas) {
        const url = canvas.toDataURL('image/png');
        const link = document.createElement('a');
        link.download = 'poster.png';
        link.href = url;
        link.click();
      }
    } catch (error) {
      console.error('ç”Ÿæˆæµ·æŠ¥å¤±è´¥ï¼š', error);
    }
  }
</script>

<style scoped>
  .app {
    display: flex;
    height: 100vh;
    font-family:
      -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  .editor-container {
    flex: 1;
    padding: 20px;
    background: #f5f5f5;
  }

  .toolbar {
    width: 200px;
    padding: 20px;
    background: white;
    border-left: 1px solid #e0e0e0;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .toolbar button {
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    background: white;
    cursor: pointer;
    transition: background-color 0.2s;
  }

  .toolbar button:hover {
    background: #f5f5f5;
  }

  .properties-panel {
    width: 250px;
    padding: 20px;
    background: white;
    border-left: 1px solid #e0e0e0;
  }

  .properties-panel h3 {
    margin-top: 0;
    color: #333;
  }

  .property-item {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
    font-size: 14px;
  }

  .property-item label {
    color: #666;
    font-weight: 500;
  }

  .property-item span {
    color: #333;
  }
</style>
```

### 4. å®Œæ•´ç¤ºä¾‹

å‚è€ƒæˆ‘ä»¬çš„ [Vue å®Œæ•´ç¤ºä¾‹](https://github.com/Fairfarren/PosterKit/tree/main/example/vue)ï¼Œäº†è§£æ›´å¤šé«˜çº§ç”¨æ³•ã€‚

## ğŸ¯ åŸºç¡€åŠŸèƒ½æ¼”ç¤º

### å¡ç‰‡æ“ä½œ

- **æ‹–æ‹½ç§»åŠ¨**ï¼šç‚¹å‡»å¡ç‰‡å¹¶æ‹–æ‹½åˆ°ç›®æ ‡ä½ç½®
- **ç¼©æ”¾è°ƒæ•´**ï¼šæ‹–æ‹½å¡ç‰‡å››è§’å’Œè¾¹ç¼˜çš„æ§åˆ¶ç‚¹
- **å›¾å±‚ç®¡ç†**ï¼šå³é”®èœå•æˆ–å¿«æ·é”®è¿›è¡Œå›¾å±‚æ“ä½œ
- **å±æ€§ç¼–è¾‘**ï¼šé€‰ä¸­å¡ç‰‡ååœ¨å±æ€§é¢æ¿ç¼–è¾‘

### äº‹ä»¶ç›‘å¬

```javascript
// ç›‘å¬å½“å‰é€‰ä¸­å¡ç‰‡å˜åŒ–
kitBox.addEventListener('current-data-change', (e) => {
  const cardData = e.detail;
  console.log('é€‰ä¸­å¡ç‰‡ï¼š', cardData);
});
```

### æµ·æŠ¥å¯¼å‡º

```javascript
// ç”Ÿæˆæµ·æŠ¥å›¾ç‰‡
const canvas = await kitBox.createPoster();
const imageUrl = canvas.toDataURL('image/png');
```

## ğŸš€ ä¸‹ä¸€æ­¥

æ­å–œï¼æ‚¨å·²ç»æˆåŠŸé›†æˆäº† PosterKitã€‚æ¥ä¸‹æ¥å¯ä»¥ï¼š

1. **æ¢ç´¢ API**ï¼šæŸ¥çœ‹[å®Œæ•´ API æ–‡æ¡£](/guide/apis/init)äº†è§£æ›´å¤šåŠŸèƒ½
2. **è‡ªå®šä¹‰æ ·å¼**ï¼šå­¦ä¹ å¦‚ä½•[è‡ªå®šä¹‰ä¸»é¢˜å’Œæ ·å¼](/guide/customization/theming)
3. **é«˜çº§åŠŸèƒ½**ï¼šäº†è§£[æ‰¹é‡æ“ä½œ](/guide/advanced/batch-operations)å’Œ[æ’ä»¶æ‰©å±•](/guide/advanced/plugins)
4. **ç”Ÿäº§éƒ¨ç½²**ï¼šæŸ¥çœ‹[æ€§èƒ½ä¼˜åŒ–æŒ‡å—](/guide/deployment/optimization)

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

- æŸ¥çœ‹ [å¸¸è§é—®é¢˜](/guide/faq) å¿«é€Ÿè§£å†³å¸¸è§é—®é¢˜
- è®¿é—® [GitHub Issues](https://github.com/Fairfarren/PosterKit/issues) æŠ¥å‘Š Bug æˆ–å»ºè®®
- åŠ å…¥æˆ‘ä»¬çš„ [è®¨è®ºç¤¾åŒº](https://github.com/Fairfarren/PosterKit/discussions) ä¸å…¶ä»–å¼€å‘è€…äº¤æµ
